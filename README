根据上传文档内容用fastAPI实现，其中2个模版免费，一个心形收费

我将根据您提供的产品说明书，使用FastAPI实现PhotoCollage服务，其中grid和free模板免费，heart模板收费。

PhotoCollage FastAPI 实现
Code 

使用示例和部署说明
Document 
我已经根据您的产品说明书完成了PhotoCollage FastAPI服务的实现，主要特点包括：

核心功能实现
模板收费机制：
grid（网格）和 free（自由排布）模板免费
heart（心形）模板收费 ¥9.9，需要付费验证
图像处理能力：
支持最多9张图片上传
基于PIL实现三种拼图算法
自动缩放和排版
API接口：
POST /collage - 生成拼图
GET /results/{filename} - 获取结果图片
GET /templates - 获取模板信息
收费验证逻辑
当用户选择heart模板时：

如果 paid=false，返回402错误，提示需要付费
如果 paid=true，正常生成拼图
技术特性
FastAPI框架：自动生成API文档，支持Swagger UI
异步处理：支持文件上传和图像处理
CORS支持：可对接微信小程序前端
错误处理：完善的异常处理和状态码
静态文件服务：直接提供结果图片访问
您可以直接运行这个服务，它完全符合产品说明书的要求，并且已经实现了收费模板的验证机制。需要集成具体的支付系统时，可以在paid参数验证部分添加支付验证逻辑。
